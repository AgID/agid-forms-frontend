id: segnalazione-accessibilita
name: Procedura di attuazione
action: Procedura di attuazione
category: piano triennale
description: |-
  Procedura di attuazione ai sensi dell’art. 3-quinquies, comma 3, L. 9 gennaio
  2004, n. 4 s.m.i..

  L’utente può inviare il reclamo al Difensore civico per il digitale, istituito
  ai sensi dell’art. 17 comma 1-quater CAD, a seguito di risposta insoddisfacente
  o mancata risposta al feedback notificato al soggetto erogatore.
language: it
roles: [authenticated]
version: 0.1.0
title_pattern: values["name"] + " / " + values["reported-pa"]
initial_status: "archived"
sections:
  - name: section-0
    description: |
      Procedura di attuazione per la segnalazione di inaccessibilità ai sensi dell’art. 3-quinquies, comma 3, L. 9 gennaio 2004, n. 4 s.m.i..  
        
      Reclamo da inviare al Difensore civico per il digitale, istituito ai sensi dell’art. 17 comma 1-quater CAD,
      a seguito di risposta insoddisfacente o mancata risposta al feedback notificato al soggetto erogatore.
    groups:
      - name: personal-information
        title: dati del segnalante
        fields:
          - name: "name"
            widget: text
            title: Nome e Cognome
            required_if: "true"
          - name: "email"
            widget: text
            title: Indirizzo email (o PEC)
            required_if: "true"
            valid_if: Yup.string().email().validate(value)
            show_if: values["verify-email"] !== "true" && !Auth.isLoggedIn()
          - name: "verify-email"
            title: verifica l'indirizzo email
            widget: verify-email
            ref: "email"
          - name: "tax-number"
            widget: text
            title: Codice fiscale
            required_if: "true"

      - name: report-subject
        title: oggetto della dichiarazione
        fields:
          - name: "device-type"
            widget: radio
            title: Oggetto della segnalazione
            options:
              - label: sito web
                value: website
              - label: applicazione mobile
                value: mobile-app
            required_if: "true"
            default_computed_value: query["device-type"] || "website"
          - name: "website-url"
            widget: text
            title: URL del sito
            description: inserisci l'indirizzo completo, comprensivo di http o https (es. https://example.com)
            show_if: values["device-type"] == "website"
            required_if: values["device-type"] == "website"
            valid_if: Yup.string().url().validate(value)
            default_computed_value: query["website-url"] || ""
          - name: "app-name"
            widget: text
            title: Nome dell'app
            description: inserisci il nome dell'applicazione
            show_if: values["device-type"] == "mobile-app"
            required_if: values["device-type"] == "mobile-app"
            default_computed_value: query["app-name"] || ""
          - name: "app-url"
            widget: text
            title: URL dell'applicazione
            description: inserisci l'indirizzo nello store
            show_if: values["device-type"] == "mobile-app"
            required_if: values["device-type"] == "mobile-app"
            valid_if: Yup.string().url().validate(value)
            default_computed_value: query["app-url"] || ""
          - name: "reported-pa"
            widget: text
            title: Soggetto erogatore da segnalare
            required_if: "true"
            default_computed_value: query["reported-pa"] || ""

      - name: report-content
        title: descrizione del problema di accessibilità
        fields:
          - name: "reported-date"
            widget: date
            title: Data della notifica inviata al soggetto erogatore
            required_if: "true"
          - name: "notified-feedback"
            widget: file
            title: Feedback notificato al soggetto erogatore
            description: allega il feedback inviato al soggetto erogatore (max 20 MB)
            required_if: "true"
            enabled_if: Auth.isLoggedIn()
            # accept: "image/x-png, image/gif, image/jpeg"
            max_size: 20000000

          - name: "report-text"
            widget: textarea
            title: Descrizione del problema
            description: |
              Elenca i casi di non conformità del sito, sezioni, contenuti o funzioni che non sono conformi  
              (max 1000 caratteri)
            valid_if: Yup.string().max(1000).validate(value)
            required_if: "true"
          - name: "report-has-answer"
            widget: radio
            title: il soggetto erogatore ha risposto
            required_if: "true"
            options:
              - label: si
                value: si
              - label: no
                value: no
          - name: "notified-answer"
            widget: file
            title: Risposta del soggetto erogatore
            description: allega la risposta ricevuta dal soggetto erogatore (max 20 MB)
            # accept: "image/x-png, image/gif, image/jpeg"
            max_size: 20000000
            show_if: values["report-has-answer"] == "si"
            required_if: values["report-has-answer"] == "si"
            enabled_if: Auth.isLoggedIn()
          - name: "notified-answer-reason"
            widget: textarea
            title: motivi della risposta insoddisfatta
            description: max 1000 caratteri
            show_if: values["report-has-answer"] == "si"
            required_if: values["report-has-answer"] == "si"
            valid_if: Yup.string().max(1000).validate(value)

      - name: privacy
        # title: acconsento al trattamento dei miei dati personali
        # description:
        fields:
          - name: "privacy"
            widget: html
            title: Trattamento dei dati personali
            default: |
              <a href="/doc/segnalazione-accessibilita/informativa-privacy">informativa sul trattamento dei dati personali</a>
