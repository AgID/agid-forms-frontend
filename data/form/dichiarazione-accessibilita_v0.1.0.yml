id: dichiarazione-accessibilita
name: Dichiarazione di accessibilità
language: it
enabled: true
version: 0.1.0
# slug_pattern: "'/dichiarazione-accessibilita/' + slugify(title)"
title_pattern: this["website-name"] + this["app-name"]
sections:
  - name: section-0
    title: Compila la dichiarazione
    description: |-
      Tutti i campi sono obbligatori.
    groups:
      - name: information
        title: informazioni generali
        fields:
          - name: "device-type"
            widget: radio
            title: Oggetto della dichiarazione
            default: website
            options:
              - label: sito web
                value: website
              - label: applicazione mobile
                value: mobile-app
            required_if: "true"
          - name: "website-name"
            widget: text
            title: Nome del sito
            description: inserisci il nome del sito web
            show_if: this["device-type"] == "website"
            required_if: this["device-type"] == "website"
          - name: "website-url"
            widget: text
            title: URL del sito
            description: inserisci l'indirizzo completo, comprensivo di http o https (es. https://example.com)
            show_if: this["device-type"] == "website"
            required_if: this["device-type"] == "website"
            valid_if: Yup.string().url().validate(value)
          - name: "app-name"
            widget: text
            title: Nome dell'app
            description: inserisci il nome dell'applicazione
            show_if: this["device-type"] == "mobile-app"
            required_if: this["device-type"] == "mobile-app"
          - name: "app-url"
            widget: text
            title: URL dell'applicazione
            description: inserisci l'indirizzo nello store
            show_if: this["device-type"] == "mobile-app"
            required_if: this["device-type"] == "mobile-app"
            valid_if: Yup.string().url().validate(value)

  - name: section-1
    title: Sezione 1
    description: |-
      Contenuti in ottemperanza alla Decisione di esecuzione UE 2018/1523.

    groups:
      - name: wcag-specs
        title: specifiche tecniche
        fields:
          - name: "specs-version"
            widget: radio
            title: specifiche tecniche di riferimento
            options:
              - label: WCAG 2.0
                value: wcag-20
              - label: WCAG 2.1
                value: wcag-21
            required_if: "true"

      - name: content-compliance
        title: stato di conformità
        fields:
          - name: "compliance-status"
            widget: radio
            default: compliant
            title: stato di conformità
            options:
              - label: conforme
                value: compliant
                description: |-
                  Selezionare questa opzione soltanto se sono pienamente rispettate tutte le prescrizioni
                  della norma o della specifica tecnica, senza alcuna eccezione.
              - label: parzialmente conforme
                value: partially-compliant
                description: |-
                  Selezionare questa opzione soltanto se è rispettata la maggior parte delle prescrizioni
                  della norma o della specifica tecnica, seppure con qualche eccezione. Ciò significa che il sito o l’applicazione
                  non sono ancora pienamente conformi e che devono essere adottate le misure necessarie per raggiungere la piena conformità.
              - label: non conforme
                value: non-compliant
                description: |-
                  Selezionare questa opzione soltanto se non è rispettata la maggior parte delle prescrizioni
                  della norma o della specifica tecnica.
            required_if: "true"

      - name: content-not-accessible
        title: contenuti non accessibili
        fields:
          - name: "reason-42004"
            widget: checkbox
            title: inosservanza della legge 4/2004
            enabled_if: this["compliance-status"] != "compliant"
          - name: "reason-42004-text"
            widget: textarea
            title: Indicare le sezioni, i contenuti e le funzioni non accessibili
            description: indicare le alternative accessibili a seconda dei casi (massimo 1000 caratteri)
            show_if: this["reason-42004"]
            required_if: this["reason-42004"]
            enabled_if: this["compliance-status"] != "compliant"
            valid_if: Yup.string().max(1000).validate(value)
          - name: "reason-disproportionate-burden"
            widget: checkbox
            title: onere sproporzionato
            enabled_if: this["compliance-status"] != "compliant"
          - name: "reason-disproportionate-burden-text"
            widget: textarea
            title: Indicare le sezioni, i contenuti e le funzioni non accessibili
            description: indicare le alternative accessibili a seconda dei casi (massimo 1000 caratteri)
            show_if: this["reason-disproportionate-burden"]
            required_if: this["reason-disproportionate-burden"]
            enabled_if: this["compliance-status"] != "compliant"
            valid_if: Yup.string().max(1000).validate(value)
          - name: "reason-no-law"
            widget: checkbox
            title: Il contenuto non rientra nell'ambito della legislazione applicabile
            enabled_if: this["compliance-status"] != "compliant"
          - name: "reason-no-law-text"
            widget: textarea
            title: Indicare le sezioni, i contenuti e le funzioni non accessibili (massimo 1000 caratteri)
            description: indicare le alternative accessibili a seconda dei casi
            show_if: this["reason-no-law"]
            required_if: this["reason-no-law"]
            enabled_if: this["compliance-status"] != "compliant"
            valid_if: Yup.string().max(1000).validate(value)

          # - name: content-alt
          #   title: alternative accessibili
          #   fields:
          - name: "accessible-alternatives"
            widget: textarea
            title: alternative accessibili
            description: indicare le alternative accessibili a seconda dei casi (massimo 1000 caratteri)
            enabled_if: this["compliance-status"] != "compliant"
            valid_if: Yup.string().max(1000).validate(value)

      - name: content-methodology
        title: metodo usato per redigere la dichiarazione
        fields:
          # - name: methodology
          #   widget: radio
          #   options:
          #     - label: una valutazione conforme alle prescrizioni della direttiva (UE) 2016/2012
          #       value: methodology-ue
          #     - label: altre misure considerate appropriate dagli stati membri
          #       value: methodology-other
          #   required_if: "true"
          - name: "methodology-details"
            widget: radio
            title: modalità della valutazione
            options:
              - label: un’autovalutazione effettuata direttamente dal soggetto erogatore
                value: methodology-auto
              - label: una valutazione effettuata da terzi
                value: methodology-third-party
              - label: allegato 2 - modello di autovalutazione fornito da AGID
                value: methodology-attachment
            # show_if: this["methodology"] == "methodology-other"
            # required_if: this["methodology"] == "methodology-other"
            required_if: "true"

      - name: feedback-and-contacts
        title: feedback e recapiti
        fields:
          - name: "feedback"
            widget: textarea
            title: Feedback
            description: descrivi il meccanismo di feedback
            required_if: "true"
          - name: "feedback-url"
            widget: text
            title: URL del servizio
            description: inserisci il puntamento al feedback (se presente)
            valid_if: Yup.string().url().validate(value)
          - name: "manager-email"
            title: Email responsabile
            widget: email
            valid_if: Yup.string().email().validate(value)
            required_if: "true"

      # TODO
      # - name: implementation-procedure
      #   title: procedura di attuazione
      #   description: Secondo la procedura di attuazione... (TODO)
      #   fields:
      #     - name: implementation-procedure-url
      #       title: URL servizio
      #       widget: html
      #       default: https://agid.gov.it
      #     - name: implementation-procedure-email
      #       title: Email
      #       widget: html
      #       default: example@agid.gov.it

  - name: section-2
    title: Sezione 2
    description: |-
      Ulteriori informazioni richieste dall'Agenzia per l'Italia digitale
    groups:
      - name: application-information
        title: informazioni sul sito / app
        fields:
          - name: application-published-date
            title: Data di pubblicazione del sito / app
            widget: date
            required_if: "true"
            valid_if: Yup.date().validate(value)
          - name: website-cms
            title: CMS utilizzato
            widget: select
            multiple: false
            default: none
            options:
              - label: Nessuno
                value: none
              - label: Drupal
                value: drupal
              - label: Wordpress
                value: wordpress
              - label: Joomla
                value: joomla
              - label: Plone
                value: plone
              - label: Liferay
                value: liferay
              - label: Altro
                value: other
            show_if: this["device-type"] == "website"
            required_if: this["device-type"] == "website"
          - name: application-framework
            title: Framework utilizzato
            widget: select
            multiple: false
            default: none
            options:
              - label: Nessuno
                value: none
              - label: React Native
                value: react-native
              - label: Xamarin
                value: xamarin
              - label: Altro
                value: other
            show_if: this["device-type"] == "mobile-app"
            required_if: this["device-type"] == "mobile-app"
          - name: application-os
            title: Sistema operativo
            widget: select
            multiple: false
            options:
              - label: Android
                value: android
              - label: iOS
                value: ios
            show_if: this["device-type"] == "mobile-app"
            required_if: this["device-type"] == "mobile-app"

      - name: application-org
        title: informazioni sull'organico e la struttura
        fields:
          - name: people-disabled
            title: Dipendenti con disabilità
            description: in cifre
            widget: number
            required_if: "true"
            valid_if: Yup.number().min(0).validate(value)
          - name: people-desk-disabled
            title: Postazioni per persone con disabilità
            description: in cifre
            widget: number
            required_if: "true"
            valid_if: Yup.number().min(0).validate(value)
          - name: people-expenditure
            title: Percentuale spesa prevista nel bilancio
            description: in percentuale
            widget: number
            required_if: "true"
            valid_if: Yup.number().min(0).validate(value)

      - name: application-manager
        title: Il responsabile dei processi di integrazione
        fields:
          - name: manager-present
            title: è previsto nella struttura
            widget: checkbox
          - name: manager-appointed
            title: è stato nominato dal soggetto erogatore
            widget: checkbox
